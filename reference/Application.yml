openapi: 3.0.3
info:
  title: application
  version: '1.0'
  description: |-
    <li>Simulation/Application Detail API : 申込詳細取得 API
    <li>Simulation/Application List API   : 申込一覧取得 API
    <li>Application Regist API            : 申込 API
    <li>Application Confirm API)          : 申込確定 API
    <li>Replenish Application API         : 審査不備登録 API
    <li>Application Status Update API     : 審査ステータス更新 API
servers:
  - url: 'http://127.0.0.1:8089/{basePath}'
    description: Local development env
    variables:
      basePath:
        default: application
paths:
  '/v1/user/applications/{applicationId}':
    parameters:
      - schema:
          type: integer
        name: applicationId
        in: path
        required: true
        description: シミュレーションID(申込ID)
    get:
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationDetailsResource'
      operationId: getApplicationDetail
      description: シミュレーション / 申込詳細取得API
      parameters: []
      tags:
        - UserApplication
  /v1/user/applications:
    post:
      operationId: registerApplication
      responses:
        '200':
          description: OK
      description: 申込API
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InsertApplicationCommand'
        description: ''
      tags:
        - UserApplication
    get:
      operationId: getApplicationList
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationListResource'
      description: シミュレーション / 申込一覧取得API
      parameters: []
      tags:
        - UserApplication
    parameters: []
  '/v1/user/applications/{applicationId}/confirm/{token}':
    parameters:
      - schema:
          type: integer
        name: applicationId
        in: path
        required: true
        description: 申込ID
      - schema:
          type: string
        name: token
        in: path
        required: true
        description: token
    put:
      operationId: confirmApplication
      responses:
        '200':
          description: OK
      description: 申込確定API
      parameters: []
      tags:
        - UserApplication
  '/v1/admin/applications/{applicationId}':
    put:
      operationId: updateApplication
      responses:
        '200':
          description: OK
      description: 審査不備登録API
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateApplicationCommand'
      tags:
        - AdminApplication
      summary: ''
    parameters:
      - schema:
          type: integer
        name: applicationId
        in: path
        required: true
  '/v1/admin/applications/{applicationId}/status':
    put:
      operationId: updateApplicationStatus
      responses:
        '200':
          description: OK
      description: 審査ステータス更新API
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateApplicationStatusCommand'
      tags:
        - AdminApplication
    parameters:
      - schema:
          type: integer
        name: applicationId
        in: path
        required: true
components:
  parameters:
    Content-Type:
      name: Content-Type
      in: header
      schema:
        type: string
        example: application/json; charset=UTF-8
      description: application/json; charset=UTF-8
    Authorization:
      name: Authorization
      in: header
      required: false
      schema:
        type: string
      description: Bearerトークン
  schemas:
    InsertApplicationCommand:
      title: InsertApplicationCommand
      type: object
      description: 申込データ
      properties:
        productId:
          type: integer
          description: 物件ID
        productVersion:
          type: integer
          description: 物件Version
        monthlyFee:
          type: integer
          description: 毎月のお支払い額
        contractType:
          type: integer
          description: |-
            契約区分
            1:個人 2:法人
        contractMonths:
          type: integer
          description: 契約月数
        requestNumberPlateFlag:
          type: boolean
          description: 希望ナンバーフラグ
        requestNumberPlate1:
          type: string
          description: 希望ナンバー_第一希望
          minLength: 0
          maxLength: 32
        requestNumberPlate2:
          type: string
          description: 希望ナンバー_第二希望
          maxLength: 32
          minLength: 0
        bonusFlag:
          type: boolean
          description: ボーナス支払フラグ
        monthlyPlannedDistance:
          type: integer
          description: 月間予定走行距離
        excessDrivingFee:
          type: integer
          description: 超過走行料
        applicationAmount:
          type: integer
          description: 申込金金額
        purchaseDealerChannel:
          type: string
          description: |-
            購入販売店チャネル
            1:TOYOTA; 2:TOYOPET; 3:COROLLA;4:Netz; 5:Mobility;6:LEXUS
          maxLength: 4
          minLength: 0
        purchaseDealerCode:
          type: string
          description: 購入販売店コード
          minLength: 0
          maxLength: 32
        purchaseDealerName:
          type: string
          description: 購入販売店名
          minLength: 0
          maxLength: 32
        purchaseStoreCode:
          type: string
          description: 購入販売店店舗コード
          minLength: 0
          maxLength: 32
        purchaseStoreName:
          type: string
          description: 購入店舗名
          minLength: 0
          maxLength: 32
        purchaseMaintainerChannel:
          type: string
          description: 購入時保守販売店チャネル
          minLength: 0
          maxLength: 32
        purchaseMaintainerCode:
          type: string
          description: 購入時保守販売店コード
          minLength: 0
          maxLength: 32
        purchaseMaintainerName:
          type: string
          description: 購入時保守販売店名
          minLength: 0
          maxLength: 32
        purchaseMaintainerDealerStoreCode:
          type: string
          description: 購入時保守販売店店舗コード
          minLength: 0
          maxLength: 32
        purchaseMaintainerStoreName:
          type: string
          description: 購入時保守店舗名
          minLength: 0
          maxLength: 32
        usingPurposeType:
          type: integer
          description: 主な使用目的
          minimum: 0
          maximum: 4
        usingPurposeLabel:
          type: string
          description: 主な使用目的値ラベル
          maxLength: 100
          minLength: 0
        parkingPostcode:
          type: string
          description: 保管場所郵便番号
          maxLength: 8
          minLength: 0
        parkingPrefecture:
          type: integer
          description: 保管場所都道府県
        parkingCity:
          type: string
          description: 保管場所市区郡町村
          maxLength: 16
          minLength: 0
        parkingAddress:
          type: string
          description: 保管場所丁目・番地
          minLength: 0
          maxLength: 64
        parkingCityKana:
          type: string
          description: 保管場所市区郡町村カナ
          maxLength: 32
          minLength: 0
        parkingAddressKana:
          type: string
          description: 保管場所丁目・番地カナ
          maxLength: 128
          minLength: 0
        drivingLicenseNumber:
          type: string
          description: 運転免許番号
          minLength: 0
          maxLength: 32
        drivingLicenseImgFront:
          type: string
          maxLength: 512
          minLength: 0
        drivingLicenseImgBack:
          type: string
          description: 運転免許画像裏面
          maxLength: 512
          minLength: 0
        personalInfo:
          $ref: '#/components/schemas/PersonalInfo'
        companyInfo:
          $ref: '#/components/schemas/CompanyInfo'
      required:
        - productId
        - productVersion
        - monthlyFee
        - contractType
        - contractMonths
        - requestNumberPlateFlag
        - monthlyPlannedDistance
        - excessDrivingFee
        - applicationAmount
        - purchaseDealerChannel
        - purchaseDealerCode
        - purchaseDealerName
        - purchaseStoreCode
        - purchaseStoreName
        - purchaseMaintainerChannel
        - purchaseMaintainerCode
        - purchaseMaintainerName
        - purchaseMaintainerDealerStoreCode
        - purchaseMaintainerStoreName
        - usingPurposeType
        - usingPurposeLabel
        - parkingPostcode
        - parkingPrefecture
        - parkingCity
        - parkingAddress
        - parkingCityKana
        - parkingAddressKana
        - drivingLicenseNumber
        - drivingLicenseImgFront
        - drivingLicenseImgBack
    UpdateApplicationStatusCommand:
      title: UpdateApplicationCommand
      type: object
      description: 審査ステータス
      properties:
        contractStatus:
          type: string
          minLength: 0
          maxLength: 32
          description: |-
            契約ステータス
            003:申込内容確認中
            005:審査お見送り
            006:不備ご連絡中
            007:審査承認
        contractNumber:
          type: string
          description: 契約管理番号(TFC設定項目)
          minLength: 0
          maxLength: 32
        contractStatusUpdateDatetime:
          type: string
          description: 契約ステータス更新日
          format: date-time
        agreementDatetime:
          type: string
          description: 申込規約同意日時
          format: date-time
        identificationDatetime:
          type: string
          description: 本人確認日時
          format: date-time
        identificationResult:
          type: integer
          description: "本人確認結果\t\n0：不一致  \n1：一致"
        identificationPlace:
          type: integer
          description: |-
            確認場所
            0：店舗  1：自宅  2：その他
        identificationResultOther:
          type: string
          description: |
            本人確認その他確認
          minLength: 0
          maxLength: 128
        identificationStaffLastName:
          type: string
          minLength: 0
          maxLength: 16
          description: 本人確認担当者姓
        identificationStaffFirstName:
          type: string
          description: 本人確認担当者名
          minLength: 0
          maxLength: 16
        creditEntryDatetime:
          type: string
          format: date-time
          description: 与信審査申込日時
        creditResult:
          type: integer
          description: |-
            与信結果
            0:NG 1:OK
        creditDate:
          type: string
          format: date-time
          description: 与信結果確定日
        creditExpireDate:
          type: string
          format: date-time
          description: 与信結果有効期限
        contractEntryDatetime:
          type: string
          format: date-time
          description: 本契約申込日時(契約日)
        reasonForDifference:
          type: string
          maxLength: 255
          minLength: 0
          description: 差異理由
        jpassComment:
          type: string
          minLength: 0
          maxLength: 255
          description: J-Pass連携コメント
        followMailFlag:
          type: boolean
          description: フォローメール送信フラグ
        comment:
          type: string
          description: コメント
          minLength: 0
          maxLength: 32
      required:
        - contractStatus
        - contractNumber
        - contractStatusUpdateDatetime
        - agreementDatetime
        - identificationDatetime
        - identificationResult
        - identificationPlace
        - identificationResultOther
        - identificationStaffLastName
        - identificationStaffFirstName
        - creditEntryDatetime
        - creditResult
        - creditDate
        - creditExpireDate
        - reasonForDifference
        - jpassComment
        - followMailFlag
    UpdateApplicationCommand:
      title: UpdateApplicationCommand
      type: object
      description: 審査不備登録データ
      properties:
        productId:
          type: integer
          description: 物件ID
        contractType:
          type: integer
          description: |-
            契約区分
            1:個人 2:法人
        personalInfo:
          $ref: '#/components/schemas/PersonalInfo'
        companyInfo:
          $ref: '#/components/schemas/CompanyInfo'
      required:
        - productId
        - contractType
    ApplicationDetailsResource:
      title: GetApplicationDetailsResource
      type: object
      description: 申込詳細
      properties:
        applicationId:
          type: integer
          description: シミュレーションID(申込ID)
        productId:
          type: integer
          description: 物件ID
        memberId:
          type: string
          description: メンバーID
        monthlyFee:
          type: integer
          description: 毎月のお支払い額
        contractMonths:
          type: integer
          description: 契約月数
        requestNumberPlateFlag:
          type: boolean
          description: 希望ナンバーフラグ
        requestNumberPlate1:
          type: string
          description: 希望ナンバー_第一希望
        requestNumberPlate2:
          type: string
          description: 希望ナンバー_第二希望
        bonusFlag:
          type: boolean
          description: ボーナス支払フラグ
        monthlyPlannedDistance:
          type: integer
          description: 月間予定走行距離
        excessDrivingFee:
          type: integer
          description: 超過走行料
        applicationAmount:
          type: integer
          description: 申込金金額
        purchaseDealerChannel:
          type: string
          description: |-
            購入販売店チャネル
            1:TOYOTA; 2:TOYOPET; 3:COROLLA;4:Netz; 5:Mobility;6:LEXUS
        purchaseDealerCode:
          type: string
          description: 購入販売店コード
        purchaseDealerName:
          type: string
          description: 購入販売店名
        purchaseStoreCode:
          type: string
          description: 購入販売店店舗コード
        purchaseStoreName:
          type: string
          description: 購入店舗名
        purchaseMaintainerChannel:
          type: string
          description: 購入時保守販売店チャネル
        purchaseMaintainerCode:
          type: string
          description: 購入時保守販売店コード
        purchaseMaintainerName:
          type: string
          description: 購入時保守販売店名
        purchaseMaintainerDealerStoreCode:
          type: string
          description: 購入時保守販売店店舗コード
        purchaseMaintainerStoreName:
          type: string
          description: 購入時保守店舗名
        usingPurposeType:
          type: integer
          description: 主な使用目的
        usingPurposeLabel:
          type: string
          description: 主な使用目的値ラベル
        parkingPostcode:
          type: string
          description: 保管場所郵便番号
        parkingPrefecture:
          type: integer
          description: 保管場所都道府県
        parkingCity:
          type: string
          description: 保管場所市区郡町村
        parkingAddress:
          type: string
          description: 保管場所丁目・番地
        parkingCityKana:
          type: string
          description: 保管場所市区郡町村カナ
        parkingAddressKana:
          type: string
          description: 保管場所丁目・番地カナ
        productInfo:
          $ref: '#/components/schemas/ProductInfo'
        personalInfo:
          $ref: '#/components/schemas/PersonalInfo'
        companyInfo:
          $ref: '#/components/schemas/CompanyInfo'
    ApplicationListResource:
      title: ApplicationListResources
      description: 申込一覧
      type: object
      properties:
        applicationList:
          type: array
          items:
            $ref: '#/components/schemas/ApplicationInfo'
    PersonalInfo:
      title: PersionalInfo
      description: 個人
      properties:
        updateUser:
          type: string
          description: 更新ユーザ名
        updateDatetime:
          type: string
          description: 更新日時
        member:
          type: object
          properties:
            memberStatus_sv:
              type: integer
              description: 会員ステータス
            email:
              type: string
              description: メールアドレス
              format: email
            mailMagFlag:
              type: integer
              description: メルマガフラグ
            mailActiveFlag:
              type: integer
              description: メール死活確認結果
        personal:
          type: object
          properties:
            memberNameSei:
              type: string
              description: '会員個人:姓'
            memberNameMei:
              type: string
              description: '会員個人:名'
            memberNameSeiKana:
              type: string
              description: '会員個人:セイ'
            memberNameMeiKana:
              type: string
              description: '会員個人:メイ'
            genderSV:
              type: integer
              description: '会員個人:性別'
            birthday:
              type: string
              description: '会員個人:生年月日'
            postcode:
              type: string
              description: '会員個人:自宅郵便番号'
            prefectureSV:
              type: integer
              description: '会員個人:自宅住所：都道府県'
            city:
              type: string
              description: '会員個人:自宅住所：市区郡町村'
            address:
              type: string
              description: '会員個人:自宅住所：丁目・番地'
            cityKana:
              type: string
              description: '会員個人:自宅住所：市区郡町村カナ'
            addressKana:
              type: string
              description: '会員個人:自宅住所：丁目・番地カナ'
            phoneNumber:
              type: string
              description: '会員個人:連絡先：自宅電話番号'
            mobilePhoneNumber:
              type: string
              description: '会員個人:連絡先：携帯電話番号'
            preferredContactPhoneNumber:
              type: string
              description: '会員個人:連絡先：日中連絡が取れる連絡先'
            preferredContactTimezoneArr:
              type: array
              description: '会員個人:連絡先：日中連絡が取れる時間帯'
              items:
                type: integer
        office:
          type: object
          properties:
            jobTypeSV:
              type: integer
              description: '会員勤務先:職業'
            corporateTypeSV:
              type: integer
              description: '会員勤務先:勤務先：法人格'
            classificationSV:
              type: integer
              description: '会員勤務先:勤務先：前後区分'
            officeName:
              type: string
              description: '会員勤務先:勤務先：勤務先名'
            officeNameKana:
              type: string
              description: '会員勤務先:勤務先：フリガナ'
            department:
              type: string
              description: '会員勤務先:部署'
            positionSV:
              type: integer
              description: '会員勤務先:役職'
            continuousYearsSV:
              type: integer
              description: '会員勤務先:勤続年数'
            postcode:
              type: string
              description: '会員勤務先:勤務先郵便番号'
            prefectureSV:
              type: integer
              description: '会員勤務先:勤務先住所：都道府県'
            city:
              type: string
              description: '会員勤務先:勤務先住所：市区郡町村'
            address:
              type: string
              description: '会員勤務先:勤務先住所：丁目・番地'
            cityKana:
              type: string
              description: '会員勤務先:勤務先住所：市区郡町村カナ'
            addressKana:
              type: string
              description: '会員勤務先:勤務先住所：丁目・番地カナ'
            phoneNumber:
              type: string
              description: '会員勤務先:勤務先電話番号'
            headquarterPrefectureSV:
              type: integer
              description: '会員勤務先:勤務先本社所在地'
            employeeNumberSV:
              type: integer
              description: '会員勤務先:勤務先従業員'
    CompanyInfo:
      title: CompanyInfo
      type: object
      description: 法人
      properties:
        updateUser:
          type: string
          description: 更新ユーザ名
        updateDatetime:
          type: string
          description: 更新日時
        member:
          type: object
          properties:
            memberStatusSV:
              type: integer
              description: 会員ステータス
            email:
              type: string
              description: メールアドレス
              format: email
            mailMagFlag:
              type: integer
              description: メルマガフラグ
            mailActiveFlag:
              type: integer
              description: メール死活確認結果
        corporation:
          type: object
          properties:
            corporationNumber:
              type: string
              description: 法人番号
            corporateTypeSV:
              type: integer
              description: 法人格
            classificationSV:
              type: integer
              description: 法人格前後区分
            companyName:
              type: string
              description: 会社名
            companyNameKana:
              type: string
              description: 会社名カナ
            postcode:
              type: string
              description: 会社所在地郵便番号
            prefectureSV:
              type: integer
              description: 会社所在地：都道府県
            city:
              type: string
              description: 会社所在地：市区郡町村
            address:
              type: string
              description: 会社所在地：丁目・番地
            cityKana:
              type: string
              description: 会社所在地：市区郡町村カナ
            addressKana:
              type: string
              description: 会社所在地：丁目・番地カナ
            representativeSei:
              type: string
              description: 代表者名 姓
            representativeMei:
              type: string
              description: 代表者名 名
            representativeSeiKana:
              type: string
              description: 代表者名カナ　セイ
            representativeMeiKana:
              type: string
              description: 代表者名カナ　メイ
            phoneNumber:
              type: string
              description: 法人電話番号
            establishmentDate:
              type: string
              description: 会社設立年月日
            capitalSV:
              type: integer
              description: 資本金
            annualSales:
              type: integer
              description: 年商
            ownedNumber:
              type: integer
              description: 保有台数
        contactStaff:
          type: object
          properties:
            department:
              type: string
              description: 窓口担当者　部課
            contactStaffSei:
              type: string
              description: 窓口担当者　姓
            contactStaffMei:
              type: string
              description: 窓口担当者　名
            contactStaffSeiKana:
              type: string
              description: 窓口担当者　セイ
            contactStaffMeiKana:
              type: string
              description: 窓口担当者　メイ
            postcode:
              type: string
              description: 窓口担当者郵便番号
            prefectureSV:
              type: integer
              description: 窓口担当者住所：都道府県
            city:
              type: string
              description: 窓口担当者住所：市区郡町村
            address:
              type: string
              description: 窓口担当者住所：丁目・番地
            cityKana:
              type: string
              description: 窓口担当者住所：市区郡町村カナ
            addressKana:
              type: string
              description: 窓口担当者住所：丁目・番地カナ
            preferredContactPhoneNumber:
              type: string
              description: 窓口担当者連絡先：日中連絡が取れる連絡先
            preferredContactTimezoneArr:
              type: array
              description: 窓口担当者連絡先：日中連絡が取れる時間帯
              items:
                type: integer
    ProductInfo:
      title: ProductInfo
      type: object
      description: 物件
      properties:
        makeName:
          type: string
          description: メーカー名
          maxLength: 50
          minLength: 0
        modelName:
          type: string
          description: 車種名
          minLength: 0
          maxLength: 50
        gradeName:
          type: string
          description: グレード名
          minLength: 0
          maxLength: 50
        outerPlateColorDisplayName:
          type: string
          description: 外鈑色
          minLength: 0
          maxLength: 32
        interiorColorDisplayName:
          type: string
          minLength: 0
          maxLength: 32
          description: 内装色
        firstRegisterDate:
          type: string
          description: 初年度登録年月
          format: date
        monthlyPlannedDistance:
          type: integer
          description: 予定月間走行距離
        excessDrivingFee:
          type: integer
          description: 超過走行料
        monthlyFee:
          type: integer
          description: 月額
        applicationAmount:
          type: integer
          description: 申込金
        contractPeriod:
          type: string
          description: 契約期間
          format: date
        expectedPublishStartDate:
          type: string
          format: date
          description: 掲載開始日
        expectedPublishEndDate:
          type: string
          description: 掲載終了日
          format: date
        comment1:
          type: string
          description: コメント1
          maxLength: 255
          minLength: 0
        comment2:
          type: string
          description: コメント2
          maxLength: 255
          minLength: 0
        productImages:
          type: array
          items:
            title: productImage
            type: object
            description: ''
            properties:
              imageType:
                type: string
                description: |-
                  画像種類：
                  01:掲載用
                minLength: 0
                maxLength: 4
              imageSubType:
                type: string
                description: |-
                  画像小分類
                  01：内装
                  02：外装
                minLength: 0
                maxLength: 4
              imageName:
                type: string
                description: ファイル名
                minLength: 0
                maxLength: 255
              imageId:
                type: integer
                description: 物件画像ID
              imageUrl:
                type: string
                description: 物件画像url
              description:
                type: string
                description: コメント
                minLength: 0
                maxLength: 255
              displayOrder:
                type: integer
                description: 表示順
    ApplicationInfo:
      title: ApplicationListInfo
      type: object
      description: 申込
      properties:
        applicationId:
          type: integer
          description: 申込ID
        modelName:
          type: string
          description: 車種名
          minLength: 0
          maxLength: 32
        gradeName:
          type: string
          minLength: 0
          maxLength: 32
          description: グレード名
        vehicleImage:
          type: string
          minLength: 0
          maxLength: 255
          description: 車両画像
        contractStatus:
          type: string
          minLength: 0
          maxLength: 4
          description: 契約ステータス
        applicationDate:
          type: string
          format: date
          description: お申込み日
      required:
        - applicationId
        - modelName
        - gradeName
        - vehicleImage
        - contractStatus
        - applicationDate
  responses: {}
tags:
  - name: AdminApplication
  - name: UserApplication
