openapi: 3.0.3
info:
  title: application
  version: '1.0'
  description: |-
    <li>Application (or Simulation) Search API : 申込/見積り一覧取得
    <li>Application (or Simulation) Detail API : 申込/見積り詳細取得
    <li>Simulation Add API                     : 見積り一時保存
    <li>Simulation Delete API                  : 見積り削除
    <li>Audit Applying API                     : 審査申込
    <li>Audit Result Entering API              : 審査結果登録
    <li>Resolve Unqualified Audit API          : 審査不備対応
    <li>Application Confirming API             : 申込確定
servers:
  - url: 'http://127.0.0.1:8185/'
    description: Local development env
    variables:
      basePath:
        default: application/v1/public
paths:
  /application/v1/public/simulation:
    post:
      operationId: registerSimulationApplication
      description: 申込一時保存APIです。
      parameters:
        - $ref: '#/components/parameters/Content-Type'
        - $ref: '#/components/parameters/memberId'
      security:
        - API Key: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InsertApplicationCommand'
        description: ''
      tags:
        - simulation
      responses:
        '200':
          description: OK
  '/application/v1/public/application/{applicationId}':
    parameters:
      - schema:
          type: integer
        name: applicationId
        in: path
        required: true
        description: シミュレーションID(申込ID)
    get:
      tags:
        - Application
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationDetailsResources'
      operationId: getApplicationId
      description: シミュレーション / 申込詳細取得APIです。
      parameters:
        - $ref: '#/components/parameters/Content-Type'
        - $ref: '#/components/parameters/memberId'
  '/application/v1/public/simulation/{simulationId}':
    parameters:
      - schema:
          type: integer
        name: simulationId
        in: path
        required: true
        description: シミュレーションID
    delete:
      operationId: deleteApplication
      responses:
        '200':
          description: OK
      description: シミュレーション削除APIです。
      parameters:
        - $ref: '#/components/parameters/Content-Type'
        - $ref: '#/components/parameters/memberId'
      tags:
        - simulation
      summary: ''
  /application/v1/public/application:
    post:
      operationId: registerApplication
      responses:
        '200':
          description: OK
      description: 申込APIです。
      parameters:
        - $ref: '#/components/parameters/Content-Type'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InsertApplicationCommand'
        description: ''
      tags:
        - Application
    get:
      operationId: getApplication
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationListResources'
      tags:
        - Application
      description: 申込一覧取得APIです。
      parameters:
        - $ref: '#/components/parameters/Content-Type'
        - $ref: '#/components/parameters/memberId'
  '/application/v1/public/application/confirm/{applicationId}':
    parameters:
      - schema:
          type: integer
        name: applicationId
        in: path
        required: true
        description: 申込ID
    put:
      operationId: confirmApplication
      responses:
        '200':
          description: OK
      description: 申込確定APIです。
      parameters:
        - $ref: '#/components/parameters/Content-Type'
        - $ref: '#/components/parameters/memberId'
      tags:
        - Application
  /application/v1/public/replenish-application:
    put:
      operationId: replenishApplication
      responses:
        '200':
          description: OK
      description: 審査不備登録APIです。
      parameters:
        - $ref: '#/components/parameters/Content-Type'
        - $ref: '#/components/parameters/memberId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReplenishApplicationCommand'
      tags:
        - Application
  /application/v1/public/application-status:
    put:
      operationId: updateApplicationStatus
      responses:
        '200':
          description: OK
      description: 審査ステータス更新APIです。
      parameters:
        - $ref: '#/components/parameters/Content-Type'
        - $ref: '#/components/parameters/memberId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateApplicationStatusCommand'
      tags:
        - Application
components:
  parameters:
    Content-Type:
      name: Content-Type
      in: header
      schema:
        type: string
        example: application/json; charset=UTF-8
      description: application/json; charset=UTF-8
    memberId:
      name: memberId
      in: header
      required: false
      schema:
        type: string
        minLength: 0
        maxLength: 32
      description: メンバーID
  schemas:
    InsertApplicationCommand:
      description: ''
      type: object
      x-examples:
        example-1:
          simulationId: 0
          productId: 0
          monthlyFee: 0
          contractMonths: 0
          requestNumberPlateFlag: true
          requestNumberPlate1: string
          requestNumberPlate2: string
          bonusFlag: true
          applicationAmount: 0
          contractType: s
      properties:
        simulationId:
          type: integer
        productId:
          type: integer
        monthlyFee:
          type: integer
        contractMonths:
          type: integer
        requestNumberPlateFlag:
          type: boolean
        requestNumberPlate1:
          type: string
          minLength: 1
        requestNumberPlate2:
          type: string
          minLength: 1
        bonusFlag:
          type: boolean
        applicationAmount:
          type: integer
        contractType:
          type: string
          minLength: 1
      required:
        - simulationId
        - productId
        - monthlyFee
        - contractMonths
        - requestNumberPlateFlag
        - requestNumberPlate1
        - requestNumberPlate2
        - bonusFlag
        - applicationAmount
        - contractType
    ApplicationDetailsResources:
      title: application_detalis
      type: object
      properties:
        applicationId:
          type: integer
          description: シミュレーションID(申込ID)
        productId:
          type: integer
          description: 物件ID
        memberId:
          type: string
          description: メンバーID
          minLength: 0
          maxLength: 32
        monthlyFee:
          type: integer
          description: 毎月のお支払い額
        contractMonths:
          type: integer
          description: 契約月数
        requestNumberPlateFlag:
          type: boolean
          description: 希望ナンバーフラグ
        requestNumberPlate1:
          type: string
          description: 希望ナンバー_第一希望
          minLength: 0
          maxLength: 32
        requestNumberPlate2:
          type: string
          description: 希望ナンバー_第二希望
          maxLength: 32
          minLength: 0
        bonusFlag:
          type: boolean
          description: ボーナス支払フラグ
        monthlyPlannedDistance:
          type: integer
          description: 月間予定走行距離
        excessDrivingFee:
          type: integer
          description: 超過走行料
        applicationAmount:
          type: integer
          description: 申込金金額
        purchaseDealerChannel:
          type: string
          description: |-
            購入販売店チャネル
            1:TOYOTA; 2:TOYOPET; 3:COROLLA;4:Netz; 5:Mobility;6:LEXUS
          maxLength: 4
          minLength: 0
        purchaseDealerCode:
          type: string
          description: 購入販売店コード
          minLength: 0
          maxLength: 32
        purchaseDealerName:
          type: string
          description: 購入販売店名
          minLength: 0
          maxLength: 32
        purchaseStoreCode:
          type: string
          description: 購入販売店店舗コード
          minLength: 0
          maxLength: 32
        purchaseStoreName:
          type: string
          description: 購入店舗名
          minLength: 0
          maxLength: 32
        purchaseMaintainerChannel:
          type: string
          description: 購入時保守販売店チャネル
          minLength: 0
          maxLength: 32
        purchaseMaintainerCode:
          type: string
          description: 購入時保守販売店コード
          minLength: 0
          maxLength: 32
        purchaseMaintainerName:
          type: string
          description: 購入時保守販売店名
          minLength: 0
          maxLength: 32
        purchaseMaintainerDealerStoreCode:
          type: string
          description: 購入時保守販売店店舗コード
          minLength: 0
          maxLength: 32
        purchaseMaintainerStoreName:
          type: string
          description: 購入時保守店舗名
          minLength: 0
          maxLength: 32
        usingPurposeType:
          type: integer
          description: 主な使用目的
          minimum: 0
          maximum: 4
        usingPurposeLabel:
          type: string
          description: 主な使用目的値ラベル
          maxLength: 100
          minLength: 0
        parkingPostcode:
          type: string
          description: 保管場所郵便番号
          maxLength: 8
          minLength: 0
        parkingPrefecture:
          type: integer
          description: 保管場所都道府県
          maximum: 9999
        parkingCity:
          type: string
          description: 保管場所市区郡町村
          maxLength: 16
          minLength: 0
        parkingAddress:
          type: string
          description: 保管場所丁目・番地
          minLength: 0
          maxLength: 64
        parkingCityKana:
          type: string
          description: 保管場所市区郡町村カナ
          maxLength: 32
          minLength: 0
        parkingAddressKana:
          type: string
          description: 保管場所丁目・番地カナ
          maxLength: 128
          minLength: 0
        productInfo:
          $ref: '#/components/schemas/ProductInfo'
        personalInfo:
          $ref: '#/components/schemas/PersonalInfo'
        companyInfo:
          $ref: '#/components/schemas/CompanyInfo'
      description: ''
    ApplicationListResources:
      title: GetApplicationListResources
      type: object
      properties:
        simulationList:
          type: array
          items:
            $ref: '#/components/schemas/Simulation'
        contractList:
          type: array
          items:
            $ref: '#/components/schemas/Contract'
    ReplenishApplicationCommand:
      title: ReplenishApplicationResources
      type: object
      description: 審査不備登録
      x-examples: {}
      properties:
        productId:
          type: integer
          description: 物件ID
        personalInfo:
          $ref: '#/components/schemas/PersonalInfo'
        companyInfo:
          $ref: '#/components/schemas/CompanyInfo'
      required:
        - productId
    UpdateApplicationStatusCommand:
      title: UpdateApplicationCommand
      type: object
      description: 審査ステータス
      properties:
        applicationId:
          type: integer
          description: 申込ID
        productId:
          type: integer
          description: 物件ID
        contractStatus:
          type: string
          minLength: 0
          maxLength: 32
          description: |-
            契約ステータス
            003:申込内容確認中
            005:審査お見送り
            006:不備ご連絡中
            007:審査承認
        comment:
          type: string
          minLength: 0
          maxLength: 32
          description: コメント
      required:
        - applicationId
        - productId
        - contractStatus
    CompanyInfo:
      title: companyInfo
      type: object
      properties:
        member_id:
          type: string
          description: 会員ID
        update_user:
          type: string
          description: 更新ユーザ名
        update_datetime:
          type: string
          description: 更新日時
        member:
          type: object
          properties:
            member_status_sv:
              type: integer
              description: 会員ステータス
            email:
              type: string
              description: メールアドレス
            mail_mag_flag:
              type: integer
              description: メルマガフラグ
            mail_active_flag:
              type: integer
              description: メール死活確認結果
        corporation:
          type: object
          properties:
            corporation_number:
              type: string
              description: 法人番号
            corporate_type_sv:
              type: integer
              description: 法人格
            classification_sv:
              type: integer
              description: 法人格前後区分
            company_name:
              type: string
              description: 会社名
            company_name_kana:
              type: string
              description: 会社名カナ
            postcode:
              type: string
              description: 会社所在地郵便番号
            prefecture_sv:
              type: integer
              description: 会社所在地：都道府県
            city:
              type: string
              description: 会社所在地：市区郡町村
            address:
              type: string
              description: 会社所在地：丁目・番地
            city_kana:
              type: string
              description: 会社所在地：市区郡町村カナ
            address_kana:
              type: string
              description: 会社所在地：丁目・番地カナ
            representative_sei:
              type: string
              description: 代表者名 姓
            representative_mei:
              type: string
              description: 代表者名 名
            representative_sei_kana:
              type: string
              description: 代表者名カナ　セイ
            representative_mei_kana:
              type: string
              description: 代表者名カナ　メイ
            phone_number:
              type: string
              description: 法人電話番号
            establishment_date:
              type: string
              description: 会社設立年月日
            capital_sv:
              type: integer
              description: 資本金
            annual_sales:
              type: integer
              description: 年商
            owned_number:
              type: integer
              description: 保有台数
        contact_staff:
          type: object
          properties:
            department:
              type: string
              description: 窓口担当者　部課
            contact_staff_sei:
              type: string
              description: 窓口担当者　姓
            contact_staff_mei:
              type: string
              description: 窓口担当者　名
            contact_staff_sei_kana:
              type: string
              description: 窓口担当者　セイ
            contact_staff_mei_kana:
              type: string
              description: 窓口担当者　メイ
            postcode:
              type: string
              description: 窓口担当者郵便番号
            prefecture_sv:
              type: integer
              description: 窓口担当者住所：都道府県
            city:
              type: string
              description: 窓口担当者住所：市区郡町村
            address:
              type: string
              description: 窓口担当者住所：丁目・番地
            city_kana:
              type: string
              description: 窓口担当者住所：市区郡町村カナ
            address_kana:
              type: string
              description: 窓口担当者住所：丁目・番地カナ
            preferred_contact_phone_number:
              type: string
              description: 窓口担当者連絡先：日中連絡が取れる連絡先
            preferred_contact_timezone_arr:
              type: array
              description: 窓口担当者連絡先：日中連絡が取れる時間帯
              items:
                type: integer
    Contract:
      title: contract
      type: object
      description: ''
      properties:
        modelName:
          type: string
          description: 車種名
          minLength: 0
          maxLength: 32
        gradeName:
          type: string
          minLength: 0
          maxLength: 32
          description: グレード名
        vehicleImage:
          type: string
          minLength: 0
          maxLength: 255
          description: 車両画像
        contractStatus:
          type: string
          minLength: 0
          maxLength: 4
          description: 契約ステータス
        purchaseDealerName:
          type: string
          maxLength: 32
          minLength: 0
          description: 購入販売店名
        applicationDate:
          type: string
          format: date
          description: お申込み日
        nextMaintenanceDate:
          type: string
          description: 次回のメンテナンス予定
          format: date
      required:
        - modelName
        - gradeName
        - vehicleImage
        - contractStatus
        - purchaseDealerName
        - applicationDate
        - nextMaintenanceDate
    Image:
      title: image
      type: object
      properties:
        imageId:
          type: integer
          description: 物件画像ID
        imageName:
          type: string
          minLength: 0
          maxLength: 128
          description: ファイル名
        imageUrl:
          type: string
          description: 物件画像url
          minLength: 0
          maxLength: 255
        description:
          type: string
          description: コメント
          maxLength: 255
          minLength: 0
        publishFlag:
          type: boolean
          description: 公開フラグ(or掲載フラグ)
    PersonalInfo:
      title: personalInfo
      type: object
      properties:
        member_id:
          type: string
          description: 会員ID
        update_user:
          type: string
          description: 更新ユーザ名
        update_datetime:
          type: string
          description: 更新日時
        member:
          type: object
          properties:
            member_status_sv:
              type: integer
              description: 会員ステータス
            email:
              type: string
              description: メールアドレス
            mail_mag_flag:
              type: integer
              description: メルマガフラグ
            mail_active_flag:
              type: integer
              description: メール死活確認結果
        personal:
          type: object
          properties:
            member_name_sei:
              type: string
              description: '会員個人:会員個人:姓'
            member_name_mei:
              type: string
              description: '会員個人:会員個人:名'
            member_name_sei_kana:
              type: string
              description: '会員個人:会員個人:セイ'
            member_name_mei_kana:
              type: string
              description: '会員個人:会員個人:メイ'
            gender_sv:
              type: integer
              description: '会員個人:会員個人:性別'
            birthday:
              type: string
              description: '会員個人:会員個人:生年月日'
            postcode:
              type: string
              description: '会員個人:会員個人:自宅郵便番号'
            prefecture_sv:
              type: integer
              description: '会員個人:会員個人:自宅住所：都道府県'
            city:
              type: string
              description: '会員個人:会員個人:自宅住所：市区郡町村'
            address:
              type: string
              description: '会員個人:会員個人:自宅住所：丁目・番地'
            city_kana:
              type: string
              description: '会員個人:会員個人:自宅住所：市区郡町村カナ'
            address_kana:
              type: string
              description: '会員個人:会員個人:自宅住所：丁目・番地カナ'
            phone_number:
              type: string
              description: '会員個人:会員個人:連絡先：自宅電話番号'
            mobile_phone_number:
              type: string
              description: '会員個人:会員個人:連絡先：携帯電話番号'
            preferred_contact_phone_number:
              type: string
              description: '会員個人:会員個人:連絡先：日中連絡が取れる連絡先'
            preferred_contact_timezone_arr:
              type: array
              description: '会員個人:連絡先：日中連絡が取れる時間帯'
              items:
                type: integer
        office:
          type: object
          properties:
            job_type_sv:
              type: integer
              description: '会員勤務先:職業'
            corporate_type_sv:
              type: integer
              description: '会員勤務先:勤務先：法人格'
            classification_sv:
              type: integer
              description: '会員勤務先:勤務先：前後区分'
            office_name:
              type: string
              description: '会員勤務先:勤務先：勤務先名'
            office_name_kana:
              type: string
              description: '会員勤務先:勤務先：フリガナ'
            department:
              type: string
              description: '会員勤務先:部署'
            position_sv:
              type: integer
              description: '会員勤務先:役職'
            continuous_years_sv:
              type: integer
              description: '会員勤務先:勤続年数'
            postcode:
              type: string
              description: '会員勤務先:勤務先郵便番号'
            prefecture_sv:
              type: integer
              description: '会員勤務先:勤務先住所：都道府県'
            city:
              type: string
              description: '会員勤務先:勤務先住所：市区郡町村'
            address:
              type: string
              description: '会員勤務先:勤務先住所：丁目・番地'
            city_kana:
              type: string
              description: '会員勤務先:勤務先住所：市区郡町村カナ'
            address_kana:
              type: string
              description: '会員勤務先:勤務先住所：丁目・番地カナ'
            phone_number:
              type: string
              description: '会員勤務先:勤務先電話番号'
            headquarter_prefecture_sv:
              type: integer
              description: '会員勤務先:勤務先本社所在地'
            employee_number_sv:
              type: integer
              description: '会員勤務先:勤務先従業員'
    ProductImage:
      title: productImage
      type: object
      description: ''
      properties:
        imageType:
          type: string
          minLength: 0
          maxLength: 4
          description: |-
            画像種類：
            01：内装
            02：外装
            03：査定
            04：加修
        imageSubType:
          type: string
          maxLength: 4
          minLength: 0
          description: 画像小分類
        imageName:
          type: string
          description: ファイル名
          maxLength: 255
          minLength: 0
        imageList:
          type: array
          items:
            $ref: '#/components/schemas/Image'
    ProductInfo:
      title: productInfo
      type: object
      description: ''
      properties:
        makeName:
          type: string
          description: メーカー名
          minLength: 0
          maxLength: 50
        makeName - copy:
          type: string
          description: メーカー名
          minLength: 0
          maxLength: 50
        modelName:
          type: string
          description: 車種名
          minLength: 0
          maxLength: 50
        gradeName:
          type: string
          description: グレード名
          maxLength: 50
          minLength: 0
        outerPlateColorDisplayName:
          type: string
          description: 外鈑色
          maxLength: 32
          minLength: 0
        firstRegisterDate:
          type: string
          description: 初年度登録年月
          format: date
        monthlyPlannedDistance:
          type: integer
          description: 予定月間走行距離
        excessDrivingFee:
          type: integer
          description: 超過走行料
        monthlyFee:
          type: integer
          description: 月額
        applicationAmount:
          type: integer
          description: 申込金
        contractPeriod:
          type: string
          description: 契約期間
          format: date
        expectedPublishStartDate:
          type: string
          format: date
          description: 掲載開始日
        expectedPublishEndDate:
          type: string
          description: 掲載終了日
          format: date
        comment1:
          type: string
          maxLength: 255
          minLength: 0
          description: コメント1
        comment2:
          type: string
          maxLength: 255
          minLength: 0
          description: コメント2
        productImages:
          type: array
          items:
            $ref: '#/components/schemas/ProductImage'
        publishImages:
          type: array
          items:
            $ref: '#/components/schemas/PublishImage'
    PublishImage:
      title: publishImage
      type: object
      properties:
        imageId:
          type: integer
          description: 物件画像ID
        imageName:
          type: string
          description: ファイル名
          maxLength: 128
          minLength: 0
        description:
          type: string
          description: コメント
          maxLength: 255
          minLength: 0
        imageUrl:
          type: string
          description: 物件画像url
          maxLength: 255
          minLength: 0
        displayOrder:
          type: integer
          description: 表示順
    Simulation:
      title: simulation
      type: object
      properties:
        modelName:
          type: string
          minLength: 0
          maxLength: 32
          description: 車種名
        gradeName:
          type: string
          description: グレード名
          minLength: 0
          maxLength: 32
        vehicleImage:
          type: string
          description: 車両画像
          minLength: 0
          maxLength: 255
        contractStatus:
          type: string
          maxLength: 4
          description: 契約ステータス
        simulationDate:
          type: string
          format: date
          description: お見積り日
          pattern: '^[0-9]{4}/(0[1-9]|1[0-2])/(0[1-9]|[12][0-9]|3[01])$'
      required:
        - modelName
        - gradeName
        - vehicleImage
        - contractStatus
        - simulationDate
  responses: {}
security:
  - API Key: []
tags:
  - name: Application
  - name: simulation
